@model ReciPies.Models.Recipe

@{
    ViewData["Title"] = Model.Title;
}

<!-- 
TODO: Add anchors
TODO: Redo CSS files
-->
<form action="/edit/@Model.Id">
    <input type="submit" value="Edit recipe" />
</form>

<div class="recipe-container">
    
    <!-- Overview -->
    <div class="overview-container">
        <div class="summary-container">
            <h1>@Model.Title</h1>
            <div class="tag-container">
                @foreach (var tag in Model.RecipeTags)
                {
                    <span class="tag">@tag.Tag.Name</span>
                }
            </div>
                <div class="meta-container">
                    <!-- Rating here maybe -->
                    <span>‚è±Ô∏è @Model.TimeMinutes min</span>
                    <span>üçΩÔ∏è @Model.Portions portions</span>
                </div>
                <p>@Model.Description</p>
            <div class="source-container">
                @if (!string.IsNullOrEmpty(Model.Source)) // Is this even necessary? If no text, no div (essentially)
                {
                    if (!string.IsNullOrEmpty(Model.SourceUrl))
                    {
                        <p>Source: <a href="@Model.SourceUrl" target="_blank">@Model.Source</a></p>
                    }
                    else
                    {
                        <p>@Model.Source</p>
                    }
                }
            </div>
        </div>
        
        <div class="image-container">
            @{
                var mainImage = Model.Images.FirstOrDefault(i => i.IsMain);
            }
            @if (mainImage != null)
            {
                <img src="@mainImage.Path" alt="@Model.Title"/>
            }
        </div>
    </div>
    
    <!-- Middle -->
    <div class="main-container">
        
        <div class="ingredients-container">
            <h2>Ingredients</h2>
            <ul>
            @foreach (var ingredient in Model.Ingredients)
                {
                    <li class="ingredient">
                        @if (ingredient.Amount != 0)
                        {
                            @($"{ingredient.Amount} ")
                        }
                        @($"{ingredient.Unit} {ingredient.Name}")
                    </li>
                }
            </ul>
        </div>
        
        <div class="instructions-container">
            <h2>Instructions</h2>
            <div class="instructions">
                <p>@Model.Instructions</p>
            </div>
        </div>
    </div>

    <!-- Bottom/Other -->
    @if (!string.IsNullOrWhiteSpace(Model.Nutrition))
    {
        <div class="nutrition">
            <h2>Nutrition</h2>
            <p>@Model.Nutrition</p>
        </div>
    }
</div>